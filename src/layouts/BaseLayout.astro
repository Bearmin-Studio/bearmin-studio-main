---
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
import Loading from '../components/Loading.astro';
import '../styles/global.css';

interface Props {
  title: string;
  description?: string;
  bgColor?: 'soft-white' | 'warm-greige';
  headerVariant?: 'default' | 'hero';
  verticalCenter?: boolean;
}

const { 
  title,
  description = "Bearmin Studio / ベアミンスタジオは、個人事業主やスタートアップのためのWeb制作スタジオです。想いや空気感をていねいにすくい取り、「らしさ」が伝わるWebサイトをつくります。", 
  bgColor = 'soft-white', 
  headerVariant = 'default', 
  verticalCenter = false 
} = Astro.props;

const bgMap = {
  'soft-white': 'var(--soft-white)',
  'warm-greige': 'var(--warm-greige)',
};

const siteUrl = Astro.site ? Astro.site.toString().replace(/\/$/, '') : "https://bearmin.jp";

const schema = JSON.stringify({
  "@context": "https://schema.org",
  "@graph": [
    {
      "@type": "WebSite",
      "@id": `${siteUrl}/#website`,
      "name": "Bearmin Studio",
      "alternateName": "ベアミン",
      "url": `${siteUrl}/`,
      "description": description,
      "publisher": { "@id": `${siteUrl}/#organization` },
      "inLanguage": "ja"
    },
    {
      "@type": "ProfessionalService",
      "@id": `${siteUrl}/#organization`,
      "name": "Bearmin Studio",
      "alternateName": "ベアミン",
      "url": `${siteUrl}/`,
      "logo": `${siteUrl}/favicon.ico`,
      "description": "個人事業主やスタートアップのためのWeb制作スタジオです。想いや空気感をていねいにすくい取り、「らしさ」が伝わるWebサイトをつくります。",
      "address": {
        "@type": "PostalAddress",
        "streetAddress": "今池5-33-2",
        "addressLocality": "名古屋市千種区",
        "addressRegion": "愛知県",
        "postalCode": "464-0850",
        "addressCountry": "JP"
      },
      "serviceType": ["Webサイト制作", "Webデザイン", "保守・改善"],
      "areaServed": {
        "@type": "Country",
        "name": "JP"
      }
    }
  ]
});
---

<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{title ? `${title} | Bearmin Studio / ベアミンスタジオ` : 'Bearmin Studio / ベアミンスタジオ'}</title>
  <meta name="description" content={description}>
  <meta property="og:site_name" content="Bearmin Studio">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500&family=Zen+Maru+Gothic:wght@400;500&display=swap" rel="stylesheet">
  <script is:inline type="application/ld+json" set:html={schema} />
</head>
<body style={`background-color: ${bgMap[bgColor]};`}>
  <Loading />
  <Header variant={headerVariant} />
  <main class={verticalCenter ? 'vertical-center' : ''}>
    <slot />
  </main>
  <Footer />
</body>
</html>
